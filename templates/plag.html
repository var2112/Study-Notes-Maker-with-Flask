{% extends 'index.html' %} {% block head %}
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
  crossorigin="anonymous"
/>
<link
  rel="stylesheet"
  href="{{ url_for('static',filename='css/function.css') }}"
/>
<link
  href="https://fonts.googleapis.com/icon?family=Material+Icons"
  rel="stylesheet"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
/>
<meta property="og:type" content="content" />
<meta property="og:title" content="Similarity dectector of text" />
<!-- <script src="http://127.0.0.1:5000/?__debugger__=yes&amp;cmd=resource&amp;f=jquery.js"></script> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link rel="stylesheet" href="{{ url_for('static',filename='css/plag.css') }}" />
<!-- Boxiocns CDN Link -->
<link
  href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css"
  rel="stylesheet"
/>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js"></script>

{% endblock %} {% block body %}
<div class="wrapper">
  <div class="sidebar">
    <div class="logo-details">
      <i class="bx bxl-c-plus-plus"></i>
      <span class="logo_name">MoGo</span>
    </div>
    <ul class="nav-links">
      <li>
        <a href="{{ url_for('function')}}">
          <i class="bx bx-pie-chart-alt-2"></i>
          <span class="link_name">Summarizer</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="#">Summarizer</a></li>
        </ul>
      </li>
      <li>
        <a href="{{ url_for('question')}}">
          <i class="bx bx-line-chart"></i>
          <span class="link_name">Questions</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="#">Questions</a></li>
        </ul>
      </li>
      <li>
        <a href="{{ url_for('mcq')}}">
          <i class="bx bx-pie-chart-alt-2"></i>
          <span class="link_name">MCQs</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="#">MCQs</a></li>
        </ul>
      </li>
      <li>
        <a href="{{ url_for('para')}}">
          <i class="bx bx-compass"></i>
          <span class="link_name">Paraphraser</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="#">Paraphraser</a></li>
        </ul>
      </li>
      <li>
        <a href="{{ url_for('citigen')}}">
          <i class="bx bx-history"></i>
          <span class="link_name">Citation Generator</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="#">Citation Generator</a></li>
        </ul>
      </li>
      <li>
        <a href="{{ url_for('plag')}}">
          <i class="bx bx-cog"></i>
          <span class="link_name">Plagarism Checker</span>
        </a>
        <ul class="sub-menu blank">
          <li><a class="link_name" href="#">Plagarism Checker</a></li>
        </ul>
      </li>
    </ul>
  </div>
  <section class="home-section">
    <div class="home-content">
      <i class="bx bx-menu"></i>
      <span class="text">Plagarism Checker</span> <br />
    </div>
    <div class="main-content">
      <section class="container">
        <!-- similarity dectector -->
        <div class="sd" style="width: 100%">
          <div class="editor-container content">
            <div class="editor-toolbar">
              <div class="flex-layout">
                <button class="edit-btn-1 flex-layout">
                  <span class="material-icons"> text_fields </span>
                  Box - 1
                </button>
                <button class="edit-btn-2 flex-layout">
                  <span class="material-icons"> text_fields </span>
                  Box - 2
                </button>
              </div>
              <div class="pr-5">
                <select
                  id="Indent-mode"
                  class="form-select ml-5"
                  aria-label="Indent-mode"
                >
                  <optgroup label="Indent-mode">
                    <option selected>Spaces</option>
                    <option>Tabs</option>
                  </optgroup>
                </select>
                <select
                  id="Indent-size"
                  class="form-select ml-5"
                  aria-label="Indent-size"
                >
                  <optgroup label="Indent-size">
                    <option>2</option>
                    <option selected>4</option>
                    <option>8</option>
                  </optgroup>
                </select>
              </div>
            </div>
            <div class="editor-layout">
              <div class="multiline-editor box-1">
                <div class="foo"></div>
                <div class="editor-status-bar">
                  <span class="edited-info">Textbox - 1</span>
                  <input type="file" id="file1" accept=".txt,.docx" hidden />
                  <label for="file1">
                    <span
                      class="material-icons"
                      style="color: grey; cursor: pointer"
                    >
                      note_add
                    </span>
                  </label>
                </div>
              </div>
              <div class="multiline-editor box-2">
                <div class="bar"></div>
                <div class="editor-status-bar">
                  <span class="edited-info">Textbox - 2</span>
                  <input type="file" id="file2" accept=".txt,.docx" hidden />
                  <label for="file2">
                    <span
                      class="material-icons"
                      style="color: grey; cursor: pointer"
                    >
                      note_add
                    </span>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div
            class="data-process"
            style="padding: 10px; display: grid; grid-gap: 10px"
          >
            <div class="flex-layout end">
              <button class="btn" style="background: #00af00; color: #f1f1f1">
                Process
              </button>
              <button
                class="btn"
                style="
                  border: 0.2px solid #d1d1d1;
                  box-shadow: none;
                  color: var(--secondary-light-color);
                "
              >
                Clear All
              </button>
            </div>
            <div class="text-result flex-layout start" style="display: none">
              <div class="progress-circle flex-layout center">
                <svg>
                  <!-- cx, cy, r => length from center -->
                  <circle cx="30" cy="30" r="30" />
                  <circle cx="30" cy="30" r="30" class="per" />
                </svg>
                <span class="percent"
                  ><b>0</b>
                  <i>%</i>
                </span>
              </div>
              <div class="result flex-layout center" style="margin: auto"></div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </section>
</div>

<script>
  let arrow = document.querySelectorAll(".arrow");
  for (var i = 0; i < arrow.length; i++) {
    arrow[i].addEventListener("click", (e) => {
      let arrowParent = e.target.parentElement.parentElement; //selecting main parent of arrow
      arrowParent.classList.toggle("showMenu");
    });
  }
  let sidebar = document.querySelector(".sidebar");
  let sidebarBtn = document.querySelector(".bx-menu");
  console.log(sidebarBtn);
  /* sidebarBtn.addEventListener("click", () => {
      sidebar.classList.toggle("close");
    }); */
  $(function () {
    /* console.log("width: "+ document.body.clientWidth); */

    resizeScreen();
    $(window).resize(function () {
      resizeScreen();
    });
    $(".bx-menu").click(function () {
      if (document.body.clientWidth > 400) {
        $(".sidebar").toggleClass("close");
      } else {
        $(".sidebar").toggleClass("small-screen");
      }
    });

    function resizeScreen() {
      if (document.body.clientWidth < 400) {
        $(".sidebar").addClass("close");
      } else {
        $(".sidebar").removeClass("close");
      }
    }
  });
</script>
<script
  type="text/javascript"
  src="https://smac01.github.io/js/minieditor.js"
></script>

<script type="text/javascript">
  $(document).ready(function () {
    // editor initialization
    var foo = new MiniEditor(".foo");
    foo.build();
    var bar = new MiniEditor(".bar");
    bar.build();

    // editor tab & space indentation related functions
    $("#Indent-mode").change(function () {
      if (this.value == "Tabs") {
        //enable tab spaces
        jQuery(".editable_area").keydown(function (e) {
          if (e.keyCode == 9 || e.which == 9) {
            e.preventDefault();
            var s = this.selectionStart;
            this.value =
              this.value.substring(0, this.selectionStart) +
              "\t" +
              this.value.substring(this.selectionEnd);
            this.selectionEnd = s + 1;
          }
        });
      } else {
        jQuery(".editable_area").keydown(function (e) {
          // allow default behaviour
        });
      }
    });
    $("#Indent-size").change(function () {
      jQuery(".editable_area")
        .css("tab-size", this.value)
        .css("-moz-tab-size", this.value)
        .css("-o-tab-size", this.value);
    });
    // end

    // toggle editor tab
    jQuery(".edit-btn-1").click(function () {
      this.classList.add("active");
      jQuery(".edit-btn-2").removeClass("active");
      jQuery(".box-1").show();
      jQuery(".box-2").hide();
    });

    jQuery(".edit-btn-2").click(function () {
      this.classList.add("active");
      jQuery(".edit-btn-1").removeClass("active");
      jQuery(".box-2").show();
      jQuery(".box-1").hide();
    });

    jQuery(".edit-btn-1").click();
    // end

    // post request to server
    jQuery(".data-process .btn:first").click(function () {
      jQuery(".text-result").css("display", "flex");
      jQuery(".result").html('<span class="loader"></span>');
      try {
        jQuery
          .post({
            url: "/plag",
            data: JSON.stringify({
              p: jQuery(".box-1 .editable_area")[0].value,
              q: jQuery(".box-2 .editable_area")[0].value,
            }),
            contentType: "application/json",
            timeout: 5000,
          })
          .done(function (response) {
            // console.log(response);
            if (response.status == true) {
              $(".percent b").text(response.percentage);

              jQuery(".result").html(`
                                <p class='response'>${response.result}</p>
                                `);

              $(".progress-circle svg .per").css(
                "stroke-dashoffset",
                `calc(185 - (185 * ${response.percentage})/100)`
              );
            } else {
              jQuery(".result").html(`
                                    <p class="response">${response.result}</p>
                                `);
            }
          })
          .fail(function () {
            jQuery(".result").html(`
                            <p class="error">Request failed.</p>
                        `);
          });
      } catch (e) {
        jQuery(".result").html(`
                        <p class="error">Request failed.</p>
                    `);
      }
    });

    // clear editor content
    jQuery(".data-process .btn:last").click(function () {
      jQuery(".box-1 .editable_area")[0].value = "";
      jQuery(".box-2 .editable_area")[0].value = "";
      jQuery(".box-1 .linenumber")[0].value = "1";
      jQuery(".box-2 .linenumber")[0].value = "1";
      jQuery(".text-result").hide();
    });

    jQuery("#file1")[0].addEventListener("change", function () {
      if (this.files && this.files[0]) {
        var reader = new FileReader();
        // console.log(this.files[0]);
        reader.addEventListener("load", function () {
          jQuery(".box-1 .editable_area")[0].value = reader.result;
        });
        reader.readAsBinaryString(this.files[0]);
      }
    });
    jQuery("#file2")[0].addEventListener("change", function () {
      if (this.files && this.files[0]) {
        var reader = new FileReader();
        // console.log(this.files[0]);
        reader.addEventListener("load", function () {
          jQuery(".box-2 .editable_area")[0].value = reader.result;
        });
        reader.readAsBinaryString(this.files[0]);
      }
    });
  });
</script>
{% endblock %}
